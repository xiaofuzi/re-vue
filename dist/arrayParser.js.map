{"version":3,"sources":["webpack:///webpack/bootstrap dcc53c3fcb6fd4d554cf","webpack:///./src/parsers/arrayPathParser.js","webpack:///./src/parsers/parserc/parser.js","webpack:///./src/parsers/parserc/state.js"],"names":["leftParen","rightParen","quote","quotes","identifer","result","ast","type","value","join","identiferKey","stringKey","state","remaining","matched","pointKey","console","log","parenKey","getExpresion","object","keys","ch","token","ignoreWhitespace","range","sequence","wsequence","choice","not","optional","repeat1","action","toParser","p","makeResult","c","r","length","at","advance","str","substring","trimLeft","lower","upper","parsers","i","arguments","push","j","parser","undefined","apply","f","parseState","State","input","index","rested","pos","col","row","num","s","m","match","start","charAt"],"mappings":"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","file":"arrayParser.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dcc53c3fcb6fd4d554cf","import {\n    ch, token,\n    range,\n    sequence,\n    wsequence,\n    choice,\n    repeat1,\n    action\n} from './parserc/parser.js';\n\nimport ps from './parserc/state.js';\n\n/**\n * the parser for array path\n */\n\n/**\n * atom parser\n */\nfunction leftParen () {\n    return ch('[');\n}\n\nfunction rightParen () {\n    return ch(']');\n}\n\nfunction quote () {\n    return ch(\"'\");\n}\n\nfunction quotes () {\n    return ch('\"');\n}\n\n/**\n * identifer parser\n * array name\n * a-z/A-Z/[_]\n */\nfunction identifer () {\n    let result = repeat1(\n                choice(\n                        range('a', 'z'),\n                        range('A', 'Z'),\n                        ch('_'),\n                        ch('$')\n                    )            \n                );\n    if (!result) return false;\n\n    return action(result, function(ast){\n        return {\n                type: 'identifer',\n                value: ast.join('')\n            };\n    });\n}\n\n/**\n * identifer key\n */\nfunction identiferKey () {\n    let result = identifer();\n\n    if (!result) return false;\n\n    return action(result, function (ast) {\n        return {\n            type: 'identiferKey',\n            value: ast.value\n        };\n    });\n}\n\n/**\n * string key\n * 'key'/\"key\"\n */\nfunction stringKey () {\n    return function (state) {\n        let result = choice(\n                sequence(\n                        quote(),\n                        identifer(),\n                        quote()\n                    ),\n                sequence(\n                        quotes(),\n                        identifer(),\n                        quotes()\n                    )\n            )(state);\n\n        if (!result) return false;\n    \n        return {\n            remaining: result.remaining,\n            matched: result.matched,\n            ast: {\n                type: 'stringKey',\n                value: result.ast[1]\n            }\n        };\n    };\n}\n\nfunction pointKey () {\n    return function (state) {\n        let result = sequence(\n                        ch('.'),\n                        identiferKey()\n                    )(state);\n        console.log('pointKey: ', result);\n\n        if (!result) return false;\n        return {\n            remaining: result.remaining,\n            matched: result.matched,\n            ast: {\n                type: 'pointKey',\n                value: result.ast[1]\n            }\n        };\n    };\n}\n\nfunction parenKey () {\n    return function (state) {\n        let result = sequence(\n                        leftParen(),\n                        choice(\n                            getExpresion(),\n                            identiferKey(),\n                            stringKey()\n                            ),\n                        rightParen()\n                        )(state);\n\n        console.log('parenKey: ', result);\n        if (!result) return false;\n\n        return {\n            remaining: result.remaining,\n            matched: result.matched,\n            ast: {\n                type: 'parenKey',\n                value: result.ast[1]\n            }\n        };\n    };\n}\n\n/**\n * object get expression\n */\nfunction getExpresion () {\n    let result = sequence(\n            identifer(),\n            repeat1(\n                choice(\n                    pointKey(),\n                    parenKey()\n                )\n            )\n        );\n\n    if (!result) return false;\n\n    return action(result, function (ast) {\n        return {\n            type: 'getterExpression',\n            value: {\n                object: ast[0],\n                keys: ast[1]\n            }\n        };\n    });\n}\n\n/**\n * arrayParser\n */\nexport default getExpresion;\n\n//console.log(stringKey()(ps('\"item\"')));\n//console.log(parenKey()(ps('[info.item]')));\nconsole.log('getter: ', getExpresion()(ps('obj[info.a].name[age][\"weight\"]')));\n//console.log('complex: ', complexGetExpression()(ps('person[name][info][obj[\"name\"]]')));\n\n\n// WEBPACK FOOTER //\n// ./src/parsers/arrayPathParser.js","/**\n * @privite\n */\n\nfunction toParser (p) {\n    return typeof(p) == 'string' ? token(p) : p;\n}\n\nfunction makeResult (remaining, matched, ast) {\n    return {\n        remaining: remaining,\n        matched: matched,\n        ast: ast\n    };\n}\n\n/**\n * primitive parsers\n */\nexport function ch (c) {\n    return function (state) {\n        let r = state.length >= 1 && state.at(0) == c;\n        if (r) {\n            return {\n                remaining: state.advance(1),\n                matched: c,\n                ast: c\n            };\n        } else {\n            //console.warn('expect ' + c + ', but get ' + state.at(0) + ' at ' + state.index + '.');\n            return false;\n        }\n    };\n}\n\nexport function token (str) {\n    return function (state) {\n        let r = state.length >= str.length && state.substring(0, str.length) == str;\n\n        if (r) {\n            return {\n                remaining: state.advance(str.length),\n                matched: str,\n                ast: str\n            };\n        } else {\n            return false;\n        }\n    };\n}\n\nexport function ignoreWhitespace (p) {\n    p = toParser(p);\n\n    return function (state) {\n        return p(state.trimLeft());\n    };\n}\n\nexport function range (lower, upper) {\n    return function (state) {\n        if (state.length < 1) {\n            return false;\n        } else {\n            var ch = state.at(0);\n            if (ch >= lower && ch <= upper) {\n                return {\n                    remaining: state.advance(1),\n                    matched: ch,\n                    ast: ch\n                };\n            } else {\n                return false;\n            }\n        }\n    };\n}\n\n\nexport function sequence () {\n    var parsers = [];\n    for (var i=0; i<arguments.length; i++) {\n        parsers.push(toParser(arguments[i]))\n    }\n\n    return function (state) {\n        var ast = [];\n        var matched = '';\n        var result = {};\n        var j = 0;\n        for (j=0; j<parsers.length; j++) {\n            var parser = parsers[j];\n            result = parser(state);\n            if (result) {\n                state = result.remaining;\n                if (result.ast != undefined) {\n                    ast.push(result.ast);\n                    matched = matched + result.matched;\n                }\n            } else {\n                break;\n            }\n        }\n        if (j == parsers.length) {\n            return makeResult(result.remaining, matched, ast);\n        } else {\n            return false;\n        }\n    };\n}\n\n/**\n * Like sequence, but ignores whitespace between individual parsers.\n*/\nexport function wsequence() {\n    var parsers = [];\n    for(var i=0; i < arguments.length; ++i) {\n        parsers.push(ignoreWhitespace(toParser(arguments[i])));\n    }\n    return sequence.apply(null, parsers);\n}\n\nexport function choice () {\n    var parsers = [];\n    for(var i = 0; i < arguments.length; ++i)\n        parsers.push(toParser(arguments[i]));\n\n    return function (state) {\n        var j;\n        var result;\n        for (j=0; j<parsers.length; j++) {\n            var parser = parsers[j];\n            result = parser(state);\n\n            if (result) {\n                break;\n            }\n        }\n\n        if (j == parsers.length) {\n            return false;\n        }\n\n        return result;\n    };\n}\n\nexport function not (p) {\n    p = toParser(p);\n\n    return function(state){\n        let result = false;\n        if (state.length >= 1) {\n            if (!p(state)) {\n                result = makeResult(state.advance(1), state.at(0), state.at(0));\n            }\n        }\n\n        return result;\n    };\n}\n\nexport function optional (p) {\n    p = toParser(p);\n\n    return function(state){\n        \n    };\n}\n\nexport function repeat1 (p) {\n    p = toParser(p);\n\n    return function (state) {\n        var ast = [];\n        var matched = '';\n        var result = p(state);\n\n        if (result) {\n            while (result) {\n                ast.push(result.ast);\n                matched = matched + result.matched;\n\n                state = result.remaining;\n                result = p(state);\n            }\n            result = makeResult(state, matched, ast);\n        } else {\n            return false;\n        }\n\n        return result;\n    };\n}\n\nexport function action (p, f) {\n    p = toParser(p);\n\n    return function (state) {\n        var result = p(state);\n\n        if (result) {\n            result.ast = f(result.ast);\n        } else {\n            return false;\n        }\n\n        return result;\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/parsers/parserc/parser.js","class State {\n    constructor(input){\n        this.input = input;\n        this.index = 0;\n        this.matched = '';\n        this.rested = this.input;\n        this.length = this.rested.length;\n        this.pos = {\n            col: 0,\n            row: 0\n        };\n    }\n\n    advance (num) {\n        this.index += num;\n        this.matched += this.rested.substring(0, num);\n        this.rested = this.rested.substring(num);\n        this.length = this.rested.length;\n\n        this.pos.col += num;\n\n        return this;\n    }\n\n    trimLeft () {\n        let s = this.rested;\n        let m = s.match(/^\\s+/);\n\n        if (m) {\n            this.advance(m[0].length);\n            this.pos.col += m[0].length;\n        }\n\n        return this;\n    }\n\n    posMsg () {\n        return 'col: ' + this.pos.col + ', row: ' + this.pos.row;\n    }\n\n    substring (start, length) {\n        return this.rested.substring(start, length);\n    }\n\n    at (index) {\n        return this.rested.charAt(index);\n    }\n}\n\nexport default function parseState (str) {\n    return new State(str);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/parsers/parserc/state.js"],"sourceRoot":""}